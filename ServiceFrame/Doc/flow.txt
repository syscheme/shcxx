1 通道管理器在协议端口侦听
2 在接收到连接时创建一个请求通道对象
3 然后通道管理器与会话管理器交互,找到或创建相应的会话,通道管理器创立两者之间的联系.
4 请求通道接收数据.当有数据到达时,把数据转发给与之匹配的会话对象.
5 会话对象传给协议层进行处理.
6 当需要二级通道时,请求通道可以创建通道对象,直接与客户端进行数据交换
7 当请求通道断开时,通道管理器与会话管理器交互,释放会话.此时的释放可以理解为销毁或者入池等,由协议自行决定.
8 请求通道在等待客户端请求达一定期限后,向会话发送空闲超时消息,由会话(也就是协议决定如何处理.如:断开通道)
9 会话管理器在一个会话断开(或者说失效时)后向会话对象发送销毁通知,并销毁此会话对象.